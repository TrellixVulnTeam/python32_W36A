{% extends 'base.html' %}

{% block content_title %}
    <h3>查看书籍</h3>
{% endblock %}

{% block content %}
    <a href="/add_book/" class="btn btn-primary">添加书籍</a>
    <table class="table table-hover table-striped">
        <thead>
            <tr>
                <th>编号</th>
                <th>书籍名称</th>
                <th>价格</th>
                <th>出版日期</th>
                <th>出版社</th>
                <th>作者</th>
{#                <th>作者</th>#}
                <th>操作</th>
            </tr>
        </thead>
            {% for book in book_list %}
                <tr>
                    <td>{{ book.id }}</td>
                    <td>{{ book.title }}</td>
                    <td>{{ book.price }}</td>
                    <td>{{ book.pub_date|date:'Y-m-d' }}</td>
{#                    <td>{{ book.publish }}</td>#}
{#                    <td>{{ book.publishs_id }}</td>#}
                    <td>{{ book.publishs.name }}</td>

                    <td>
                        {% for i in book.authors.all %}
{#       这里的all不能有小括号  通过书找作者,正向查询用关联字段#}
                             {{ i.name}}
                        {% endfor %}
                    </td>
{#                    这里td放在for外面,就可以让多个作者在一个单元格#}
{#                如果td在for里面,多个作者就是多个单元格#}

                    <td>
                        <a href="/edit_book/{{ book.id }}/" class="btn btn-warning">编辑</a>
                        <a href="/del_book/{{ book.id }}/" class="btn btn-danger">删除</a>
                    </td>
                </tr>
            {% endfor %}

        <tbody>

        </tbody>
    </table>
{% endblock %}

















